<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Doylu ‚Äî Comparateur de pass (SN)</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header class="topbar">
    <div class="topbar__inner">
      <div class="brand" role="banner" aria-label="Doylu">
        <div class="brand__logo">D</div>
        <div class="brand__name">Doylu</div>
      </div>

      <button class="iconbtn" id="menuBtn" aria-label="Ouvrir le menu" aria-expanded="false">
        ‚ò∞
      </button>

      <nav class="nav" id="nav">
        <a class="nav__link" href="#/accueil" data-route="accueil">Accueil</a>
        <a class="nav__link" href="#/promos" data-route="promos">Promos</a>
        <a class="nav__link" href="#/guide" data-route="guide">Guide USSD</a>
        <a class="nav__link" href="#/contact" data-route="contact">Contact</a>
        <a class="nav__link nav__link--admin" href="#/admin" data-route="admin" id="adminNavLink" hidden>Admin</a>
      </nav>
    </div>
  </header>

  <main class="page">
    <!-- ACCUEIL -->
    <section id="view-accueil" class="view" data-view="accueil" aria-label="Accueil">
      <div class="hero">
        <h1>Avant d‚Äôacheter ton pass, v√©rifie ici.</h1>
        <p class="sub">
          Compare les offres selon ton budget. <strong>Donn√©es v√©rifi√©es</strong>, pr√™tes √† copier.
        </p>

        <div class="card heroCard">
          <div class="heroCard__row">
            <div class="budgetBox">
              <div class="budgetBox__label">üí∞ Ton budget (FCFA)</div>
              <div class="budgetBox__inputRow">
                <input id="budgetInput" class="input" type="number" inputmode="numeric" placeholder="Ex: 1500" />
                <button id="searchBtn" class="btn btn--primary">Voir les offres</button>
              </div>

              <div class="budgetBox__quick">
                <button class="chip chip--budget" data-budget="500">500</button>
                <button class="chip chip--budget" data-budget="1000">1000</button>
                <button class="chip chip--budget" data-budget="2000">2000</button>
                <button class="chip chip--budget" data-budget="3000">3000</button>
                <button class="chip chip--budget" data-budget="5000">5000</button>
              </div>
            </div>

            <div class="trust">
              <span class="pill">üîí V√©rifi√©es SMS/USSD</span>
              <span class="pill">‚öñÔ∏è Site ind√©pendant</span>
              <span class="pill" id="lastUpdatePill">üïí Derni√®re MAJ : ‚Äî</span>
              <button class="link" id="howVerifyBtn" type="button">Comment on v√©rifie ?</button>
            </div>
          </div>
        </div>

        <div class="filtersGrid">
          <div class="card filterCard">
            <div class="filterCard__title">üéØ Ton usage</div>
            <div class="chips">
              <button class="chip chip--toggle is-active" data-usage="data" id="usageData">üì± Data</button>
              <button class="chip chip--toggle" data-usage="mixte" id="usageMixte">üîÑ Mixte</button>
              <button class="chip chip--toggle" data-usage="appels" id="usageAppels">üìû Appels</button>
            </div>
          </div>

          <div class="card filterCard">
            <div class="filterCard__title">üì° Op√©rateur</div>
            <div class="chips">
              <button class="chip chip--toggle is-active" data-operator="Tous">Tous</button>
              <button class="chip chip--toggle" data-operator="Orange">Orange</button>
              <button class="chip chip--toggle" data-operator="Free">Free</button>
              <button class="chip chip--toggle" data-operator="Expresso">Expresso</button>
            </div>
          </div>

          <div class="card filterCard">
            <div class="filterCard__title">‚è± Validit√©</div>
            <div class="chips">
              <button class="chip chip--toggle is-active" data-validity="Toutes">Toutes</button>
              <button class="chip chip--toggle" data-validity="24h">24h</button>
              <button class="chip chip--toggle" data-validity="7j">7 jours</button>
              <button class="chip chip--toggle" data-validity="30j">30 jours</button>
            </div>
          </div>

          <div class="card waCard">
            <div class="waCard__title">üü¢ Recevoir les bons plans sur WhatsApp</div>
            <div class="waCard__sub">Gratuit. 1 message/jour max.</div>
            <a class="btn btn--wa" id="waCta" href="#" target="_blank" rel="noreferrer">Ouvrir WhatsApp</a>
          </div>
        </div>
      </div>

      <div class="results">
        <div id="bestBanner" class="bestBanner" hidden>
          <div class="bestBanner__title" id="bestTitle">üî• Meilleure valeur</div>
          <div class="bestBanner__gain" id="bestGain" hidden></div>
          <div class="bestBanner__hint" id="bestHint" hidden></div>
          <div class="bestBanner__meta" id="bestMeta"></div>
        </div>

        <div class="results__head">
          <div id="resultsCount" class="muted">‚Äî</div>
          <div class="muted">Astuce : touche ‚ÄúAfficher le code‚Äù pour mesurer la demande.</div>
        </div>

        <div id="offersGrid" class="grid"></div>

        <div id="noOffers" class="empty" hidden>
          <h3>Aucune offre trouv√©e</h3>
          <p>Essaie :</p>
          <div class="chips">
            <button class="chip chip--suggest" data-suggest-budget="1000">Budget 1000</button>
            <button class="chip chip--suggest" data-suggest-budget="2000">Budget 2000</button>
            <button class="chip chip--suggest" data-suggest-budget="5000">Budget 5000</button>
            <button class="chip chip--suggest" data-suggest-usage="mixte">Passer en Mixte</button>
            <button class="chip chip--suggest" data-suggest-validity="7j">Validit√© 7 jours</button>
          </div>
        </div>

        <div class="footerNote">
          Beaucoup prennent le m√™me forfait par habitude. <strong>V√©rifie toujours avant d‚Äôacheter.</strong>
        </div>
      </div>
    </section>

    <!-- PROMOS -->
    <section id="view-promos" class="view" data-view="promos" hidden aria-label="Promos">
      <div class="viewHead">
        <h2>Promos du moment (v√©rifi√©es par SMS)</h2>
        <p class="muted">Mis √† jour r√©guli√®rement. Codes USSD pr√™ts √† copier.</p>
      </div>

      <div class="card compact">
        <div class="filterRow">
          <div class="filterRow__title">Filtres</div>
          <div class="chips">
            <button class="chip chip--toggle is-active" data-promos-operator="Tous">Tous</button>
            <button class="chip chip--toggle" data-promos-operator="Orange">Orange</button>
            <button class="chip chip--toggle" data-promos-operator="Free">Free</button>
            <button class="chip chip--toggle" data-promos-operator="Expresso">Expresso</button>
          </div>
        </div>
      </div>

      <div id="promosGrid" class="grid"></div>

      <div class="card compact">
        <button class="link" id="howVerifyBtn2" type="button">Comment on v√©rifie ?</button>
      </div>
    </section>

    <!-- GUIDE -->
    <section id="view-guide" class="view" data-view="guide" hidden aria-label="Guide USSD">
      <div class="viewHead">
        <h2>Tous les codes USSD utiles (S√©n√©gal)</h2>
        <p class="muted">Pour acheter un pass, v√©rifier ton solde, consulter tes bonus, etc. (peut varier selon offre)</p>
      </div>

      <div class="accordion">
        <details open>
          <summary>Orange</summary>
          <ul>
            <li><strong>Catalogue pass (offline)</strong> : <code>*1234#</code></li>
            <li><strong>Solde cr√©dit</strong> : <code>*123#</code> (exemple)</li>
          </ul>
        </details>
        <details>
          <summary>Free</summary>
          <ul>
            <li><strong>Solde cr√©dit</strong> : <code>*xxx#</code></li>
          </ul>
        </details>
        <details>
          <summary>Expresso</summary>
          <ul>
            <li><strong>Solde cr√©dit</strong> : <code>*xxx#</code></li>
          </ul>
        </details>
      </div>

      <div class="card compact">
        <h3>Astuces</h3>
        <ul class="muted">
          <li>Si un code ne marche pas : red√©marre, v√©rifie la SIM par d√©faut, et essaye une autre variante.</li>
          <li>Certains pass ne s‚Äôaffichent que via SMS promo.</li>
        </ul>
        <a class="btn btn--primary" href="#/accueil">Trouver mon meilleur pass</a>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="view-contact" class="view" data-view="contact" hidden aria-label="Contact">
      <div class="viewHead">
        <h2>Nous contacter</h2>
        <p class="muted">Une promo qui ne marche pas ? Une erreur ? Une id√©e ?</p>
      </div>

      <div class="grid grid--contact">
        <div class="card">
          <h3>Signaler une offre</h3>
          <label class="label">Op√©rateur</label>
          <select id="contactOperator" class="input">
            <option>Orange</option>
            <option>Free</option>
            <option>Expresso</option>
          </select>
          <label class="label">D√©tails</label>
          <textarea id="contactDetails" class="input" rows="5" placeholder="Nom de l‚Äôoffre, prix, code, ce qui ne marche pas..."></textarea>
          <button id="contactSend1" class="btn btn--primary">Envoyer</button>
          <div class="muted small" id="contactInfo1"></div>
        </div>

        <div class="card">
          <h3>Envoyer une promo re√ßue par SMS</h3>
          <label class="label">Copie-colle le SMS ici</label>
          <textarea id="promoSmsText" class="input" rows="5" placeholder="Colle le SMS ici..."></textarea>
          <label class="label">Op√©rateur</label>
          <select id="promoSmsOperator" class="input">
            <option>Orange</option>
            <option>Free</option>
            <option>Expresso</option>
          </select>
          <button id="contactSend2" class="btn btn--primary">Envoyer</button>
          <div class="muted small" id="contactInfo2"></div>
        </div>

        <div class="card">
          <h3>Partenariat / Pub</h3>
          <p class="muted">Doylu est ind√©pendant. Partenariats possibles (clairs et transparents).</p>
          <button id="contactSend3" class="btn">Contacter</button>
          <div class="muted small" id="contactInfo3"></div>
        </div>
      </div>

      <div class="card compact">
        <strong>Confiance</strong>
        <div class="muted">Doylu est ind√©pendant des op√©rateurs. Les offres sont informatives et v√©rifi√©es.</div>
      </div>
    </section>

    <!-- ADMIN -->
    <section id="view-admin" class="view" data-view="admin" hidden aria-label="Admin">
      <div class="viewHead">
        <h2>Admin (invisible au public)</h2>
        <p class="muted">Ici tu ajoutes/modifies les offres. Les changements s‚Äôappliquent imm√©diatement sur Accueil.</p>
      </div>

      <div class="card">
        <div class="adminTop">
          <button id="adminLogout" class="btn">Se d√©connecter</button>
          <button id="exportJsonBtn" class="btn">Exporter JSON</button>
          <label class="btn btn--file">
            Importer JSON
            <input id="importJsonInput" type="file" accept="application/json" hidden />
          </label>
          <button id="resetDemoBtn" class="btn btn--danger">Reset d√©mo</button>
        </div>
        <div class="muted small">Astuce : l‚Äôexport te sert de backup. L‚Äôimport remplace la base locale.</div>
      </div>

      <div class="grid grid--admin">
        <div class="card">
          <h3>Ajouter / Modifier une offre</h3>

          <div class="formGrid">
            <div>
              <label class="label">ID (auto si vide)</label>
              <input id="a_id" class="input" placeholder="ex: orange_1000_5go_24h" />
            </div>

            <div>
              <label class="label">Op√©rateur</label>
              <select id="a_operator" class="input">
                <option>Orange</option>
                <option>Free</option>
                <option>Expresso</option>
              </select>
            </div>

            <div>
              <label class="label">Nom</label>
              <input id="a_name" class="input" placeholder="ex: Pass Jour 5Go" />
            </div>

            <div>
              <label class="label">Prix (FCFA)</label>
              <input id="a_price" class="input" type="number" inputmode="numeric" />
            </div>

            <div>
              <label class="label">Usage</label>
              <select id="a_usage" class="input">
                <option value="data">data</option>
                <option value="appels">appels</option>
                <option value="mixte">mixte</option>
              </select>
            </div>

            <div>
              <label class="label">Data (MB)</label>
              <input id="a_data" class="input" type="number" inputmode="numeric" placeholder="ex: 5120" />
            </div>

            <div>
              <label class="label">Minutes</label>
              <input id="a_minutes" class="input" type="number" inputmode="numeric" placeholder="ex: 60" />
            </div>

            <div>
              <label class="label">Validit√©</label>
              <select id="a_validity" class="input">
                <option value="24h">24h</option>
                <option value="7j">7j</option>
                <option value="30j">30j</option>
                <option value="mois">mois</option>
                <option value="inconnu">inconnu</option>
              </select>
            </div>

            <div>
              <label class="label">USSD</label>
              <input id="a_ussd" class="input" placeholder="ex: *1234#" />
            </div>

            <div>
              <label class="label">Source</label>
              <select id="a_source" class="input">
                <option value="official">official</option>
                <option value="sms">sms</option>
              </select>
            </div>

            <div>
              <label class="label">Promo</label>
              <select id="a_promo" class="input">
                <option value="false">non</option>
                <option value="true">oui</option>
              </select>
            </div>

            <div>
              <label class="label">√âligibilit√©</label>
              <select id="a_eligibility" class="input">
                <option value="public">public</option>
                <option value="student">student</option>
                <option value="corporate">corporate</option>
                <option value="special">special</option>
              </select>
            </div>
          </div>

          <div class="adminActions">
            <button id="saveOfferBtn" class="btn btn--primary">Enregistrer</button>
            <button id="clearFormBtn" class="btn">Vider</button>
          </div>

          <div class="muted small" id="adminStatus"></div>
        </div>

        <div class="card">
          <h3>Offres (liste)</h3>
          <div class="muted small">Clique une offre pour √©diter. ‚ÄúSupprimer‚Äù retire de la base locale.</div>
          <div id="adminOffersList" class="adminList"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- MODAL -->
  <div class="modal" id="modal" hidden>
    <div class="modal__backdrop" id="modalBackdrop"></div>
    <div class="modal__panel" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal__head">
        <div id="modalTitle" class="modal__title">Info</div>
        <button class="iconbtn" id="modalClose" aria-label="Fermer">‚úï</button>
      </div>
      <div class="modal__body" id="modalBody"></div>
      <div class="modal__foot">
        <button class="btn btn--primary" id="modalOk">OK</button>
      </div>
    </div>
  </div>

  <!-- TOAST -->
  <div class="toast" id="toast" hidden></div>

  <script src="./script.js"></script>
</body>
</html>
